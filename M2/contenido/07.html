<style>
    .fake {
        background-image: url("img/bg07.webp");
        background-size: cover;
        background-position: right center;
    }

    .custom-tooltip {
        --bs-tooltip-bg: var(--bs-white);
        --bs-tooltip-color: var(--bs-dark);
    }

    .btn-open-info {
        cursor: pointer;
        border-radius: 100%;
    }

    .btn_pop {
        cursor: pointer;
        border-radius: 100%;
    }

    .pop_style {
        max-width: 90% !important;
    }

    @media (min-width: 768px) {}
</style>
<div class="w-100 page-sco h-100 pt-4 pt-md-0">
    <div class="container-fluid">
        <div class="row align-items-center justify-content-md-center">
            <div class="col-12 col-md-11 col-lg-10">
                <div class="row align-items-center justify-content-center">
                    <div class="col-12 col-md-12 text-center">
                        <h4 class="text-rojo-1 fw-bold">Emisiones Totales BEV vs HEV vs ICEV <i
                                class="fa-solid fa-book-open text-rojo-2" data-bs-toggle="tooltip"
                                data-bs-placement="top" data-bs-custom-class="custom-tooltip"
                                data-bs-custom-class="custom-tooltip"
                                data-bs-title="<b>Visual Capitalist.</b> (2023). <i>Life cycle emissions of electric, hybrid, and combustion engine vehicles.</i> Recuperado el 24 de abril de 2025, de <a href='https://elements.visualcapitalist.com/life-cycle-emissions-of-electric-hybrid-and-combustion-engine-vehicles/' target='_blank' class='text-verde'>https://elements.visualcapitalist.com/life-cycle-emissions-of-electric-hybrid-and-combustion-engine-vehicles/</a>"></i>
                        </h4>
                    </div>
                    <div class="text-center w-100 animate__animated animate__slideInLeft ins0" style="display: none;">
                        <div class="border-dark text-rojo-1 bg-white px-4 py-2 border border-2 d-inline-block"
                            style="border-radius: 0.5em;">
                            <i class="fa-light fa-arrow-pointer text-rojo-1"></i> Da clic en cada botón
                        </div>
                    </div>
                    <div class="col-12 col-md-12">
                        <div class="row justify-content-center align-items-center h-100">
                            <div class="col-12 col-md-2">
                                <div class="row justify-content-center align-items-center h-100">
                                    <div class="col-3 col-md-8">
                                        <img src="img/07.1.webp" class="img-fluid btn-open-info" data-index="0"
                                            loading="lazy" alt="icono 1" />
                                    </div>
                                    <div class="col-3 col-md-8">
                                        <img src="img/07.2.webp" class="img-fluid btn-open-info" data-index="1"
                                            loading="lazy" alt="icono 2" />
                                    </div>
                                    <div class="col-3 col-md-8">
                                        <img src="img/07.3.webp" class="img-fluid btn-open-info" data-index="2"
                                            loading="lazy" alt="icono 3" />
                                    </div>
                                    <div class="col-3 col-md-8">
                                        <img src="img/07.4.webp" class="img-fluid btn-open-info" data-index="3"
                                            loading="lazy" alt="icono 4" />
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-md-10">
                                <!-- Swiper -->
                                <div class="swiper mySwiper">
                                    <div class="swiper-wrapper">
                                        <div class="swiper-slide">
                                            <div class="card custom-card bg-white">
                                                <div class="card-body py-0 px-0">
                                                    <div class="row justify-content-center align-items-center h-100">
                                                        <div
                                                            class="col-12 col-md-12 bg-rojo-2 text-center text-white py-md-3 py-2">
                                                            <span class="fw-bold">Emisiones de Producción</span>
                                                        </div>
                                                        <div class="col-12 col-md-11 bg-white">
                                                            <!-- <table
                                                                class="table table-bordered text-center">
                                                                <thead>
                                                                    <tr>
                                                                        <th scope="col">Tipo de vehículo</th>
                                                                        <th scope="col">BEV</th>
                                                                        <th scope="col">HEV</th>
                                                                        <th scope="col">ICEV</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr>
                                                                        <td>Producción</td>
                                                                        <td>95%</td>
                                                                        <td>50%</td>
                                                                        <td>20%</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table> -->
                                                            <div class="responsive"
                                                                style="width: 100%; overflow-x: auto;">
                                                                <img src="img/tabla1.webp" class="img-fluid"
                                                                    style="min-width: 760px;" loading="lazy"
                                                                    alt="Tabla 1" />
                                                            </div>
                                                        </div>
                                                        <div class="col-12 col-md-12">
                                                            <div class="bg-verde text-white py-2 px-2">
                                                                <span><b>*NOTA:</b> Las emisiones de producción para los
                                                                    vehículos
                                                                    eléctricos
                                                                    a batería son ~40% más altas que para los vehículos
                                                                    híbridos
                                                                    y
                                                                    de combustión.</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="swiper-slide">
                                            <div class="card custom-card bg-white">
                                                <div class="card-body py-0 px-0">
                                                    <div class="row justify-content-center align-items-center h-100">
                                                        <div
                                                            class="col-12 col-md-12 bg-verde text-center text-white py-md-3 py-2">
                                                            <span class="fw-bold">Emisiones en la Fase de Uso</span>
                                                        </div>
                                                        <div class="col-12 col-md-11 bg-white">
                                                            <!-- <table
                                                                class="table table-bordered text-center">
                                                                <thead>
                                                                    <tr>
                                                                        <th scope="col">Tipo de vehículo</th>
                                                                        <th scope="col">BEV</th>
                                                                        <th scope="col">HEV</th>
                                                                        <th scope="col">ICEV</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr>
                                                                        <td>Producción</td>
                                                                        <td>95%</td>
                                                                        <td>50%</td>
                                                                        <td>20%</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table> -->
                                                            <div class="responsive"
                                                                style="width: 100%; overflow-x: auto;">
                                                                <img src="img/tabla2.webp" class="img-fluid"
                                                                    style="min-width: 760px;" loading="lazy"
                                                                    alt="Tabla 2" />
                                                            </div>
                                                        </div>
                                                        <div class="col-12 col-md-12">
                                                            <div class="bg-verde text-white py-2 px-2">
                                                                <span><b>*NOTA:</b> Descarbonizar el sector eléctrico
                                                                    puede
                                                                    reducir las emisiones de uso de los vehículos
                                                                    eléctricos a
                                                                    batería.</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="swiper-slide">
                                            <div class="card-body py-0 px-0">
                                                <div class="row justify-content-center align-items-center h-100">
                                                    <div
                                                        class="col-12 col-md-12 bg-rojo-2 text-center text-white py-md-3 py-2">
                                                        <span class="fw-bold">Emisiones Post Consumo</span>
                                                    </div>
                                                    <div class="col-12 col-md-11 bg-white">
                                                        <!-- <table
                                                            class="table table-bordered text-center">
                                                            <thead>
                                                                <tr>
                                                                    <th scope="col">Tipo de vehículo</th>
                                                                    <th scope="col">BEV</th>
                                                                    <th scope="col">HEV</th>
                                                                    <th scope="col">ICEV</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr>
                                                                    <td>Producción</td>
                                                                    <td>95%</td>
                                                                    <td>50%</td>
                                                                    <td>20%</td>
                                                                </tr>
                                                            </tbody>
                                                        </table> -->
                                                        <div class="responsive" style="width: 100%; overflow-x: auto;">
                                                            <img src="img/tabla3.webp" class="img-fluid"
                                                                style="min-width: 760px;" loading="lazy"
                                                                alt="Tabla 3" />
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-md-12">
                                                        <div class="bg-gris-1 text-dark py-2 px-2">
                                                            <span>Esta etapa representa “créditos” de emisión asociados
                                                                al
                                                                reciclaje de vehículos.</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="swiper-slide">
                                            <div class="card custom-card bg-white" style="position: relative; z-index: 5;">
                                                <div class="card-body py-0 px-0" style="position: relative; z-index: 5;">
                                                    <div class="row justify-content-center align-items-center h-100" style="position: relative; z-index: 5;">
                                                        <div
                                                            class="col-12 col-md-12 bg-verde text-center text-white py-md-3 py-2">
                                                            <span class="fw-bold">Emisiones Totales del Ciclo de
                                                                Vida</span>
                                                        </div>
                                                        <div class="col-12 col-md-11 bg-white">
                                                            <!-- <table
                                                                class="table table-bordered text-center">
                                                                <thead>
                                                                    <tr>
                                                                        <th scope="col">Tipo de vehículo</th>
                                                                        <th scope="col">BEV</th>
                                                                        <th scope="col">HEV</th>
                                                                        <th scope="col">ICEV</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr>
                                                                        <td>Producción</td>
                                                                        <td>95%</td>
                                                                        <td>50%</td>
                                                                        <td>20%</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table> -->
                                                            <div class="responsive"
                                                                style="width: 100%; overflow-x: auto;">
                                                                <img src="img/tabla4.webp" class="img-fluid"
                                                                    style="min-width: 760px;" loading="lazy"
                                                                    alt="Tabla 4" />
                                                            </div>
                                                        </div>
                                                        <div class="col-12 col-md-12" style="z-index: 5000;">
                                                            <div
                                                                class="row justify-content-center align-items-center h-100">
                                                                <div class="col-3 col-md-2 text-center px-md-4 nota animate__animated animate__fadeInRight"
                                                                    style="display: block;">
                                                                    <img src="img/warning.webp"
                                                                        class="img-fluid btn_pop animate__animated animate__pulse animate__infinite waves-effect"
                                                                        data-popid="#pop0" data-audio="audio_m59"
                                                                        loading="lazy" alt="icono Alerta" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="d-none">
    <div id="pop0">
        <div class="container-fluid">
            <div class="row justify-content-center my-4">
                <div class="col-12 col-md-12 text-start">
                    <div class="row justify-content-center align-items-center">
                        <div class="col-12 col-md-6">
                            <p class="text-center text-rojo-1 fw-bold">Los BEV son la opción más limpia</p>
                            <p><b>Los vehículos eléctricos a batería (BEV)</b> tienen <b>la menor huella de carbono</b>
                                en todo su
                                ciclo de vida. </p>

                            <p>No generan emisiones durante su uso y pueden funcionar con energía renovable, lo que los
                                convierte en la <b>mejor alternativa para una movilidad sostenible.</b></p>
                        </div>
                        <div class="col-12 col-md-6">
                            <p class="text-center fw-bold text-primary">Comparación de Emisiones del Ciclo de Vida por
                                Tipo de Vehículo</p>
                            <canvas id="myChart" style="width: 100%; height: 320px;"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    //Inicializa los tooltips de BS5
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
    tooltipTriggerList.forEach(function (tooltipTriggerEl) {
        var tooltip = new bootstrap.Tooltip(tooltipTriggerEl, {
            trigger: 'manual',
            html: true
        });
        tooltipTriggerEl.addEventListener('click', function (e) {
            e.stopPropagation();
            if (tooltip._element.getAttribute('aria-describedby')) {
                tooltip.hide();
            } else {
                tooltip.show();
            }
        });

        document.body.addEventListener('click', function (e) {
            if (!tooltipTriggerEl.contains(e.target) && tooltip._element.getAttribute('aria-describedby')) {
                tooltip.hide();
            }
        });
    });
    $(function () {
        "use strict";
        $('#template-instruction').removeClass('show');
        $('body').addClass('fake');
        const audio_m59 = course360.createSound('audio/audio_m59.mp3');
        const audios = [
            course360.createSound("audio/audio_m50.mp3"),
            course360.createSound("audio/audio_m51.mp3"),
            course360.createSound("audio/audio_m52.mp3"),
            course360.createSound("audio/audio_m53.mp3"),
        ];

        setTimeout(function () {
            $('.btn-open-info').first().removeClass('disabled').trigger('click');
            $('.ins0').show();
        }, 500);

        var swiper = new Swiper(".mySwiper", {
            allowTouchMove: false,
            effect: "cube",
            grabCursor: false,
            cubeEffect: {
                shadow: false,
                slideShadows: true,
                shadowOffset: 20,
                shadowScale: 0.94,
            },
        });

        $(".btn-open-info").on("click", function () {
            if (!$(this).hasClass("disabled")) {
                const index = $(this).data("index");
                $(this).removeClass("animate__animated animate__pulse animate__infinite").addClass('visited');
                swiper.slideTo(index);
                course360.soundClick();
                course360.audioController.stopAllSoundsAndPlay(audios[index]);

                // Cambiar la imagen dentro del div pulsado
                $(".btn-open-info").each(function () {
                    $(this).removeClass("active");
                    const currentSrc = $(this).attr('src');
                    const newSrc = currentSrc.replace('a.webp', '.webp');
                    $(this).attr('src', newSrc);
                });
                if (!$(this).hasClass("active")) {
                    $(this).addClass("active");
                    const currentSrc = $(this).attr('src');
                    const newSrc = currentSrc.replace(/(\.\w+)$/, 'a$1');
                    $(this).attr('src', newSrc);
                }

                if ($(".btn-open-info").length === $(".btn-open-info.visited").length) {
                    // course360.setSlideVisited();
                }
            }
        });

        $(".btn_pop").click(function (e) {
            e.preventDefault();
            if (!$(this).hasClass("disabled")) {
                if ($(this).data("audio")) {
                    course360.audioController.stopAllSoundsAndPlay(eval($(this).data("audio")));
                } else {
                    course360.soundClick();
                }
                $(".btn_pop").removeClass("visited");
                $(this).removeClass("animate__animated animate__pulse animate__infinite waves-effect");
                $(this).addClass("completed visited");
                var html = $($(this).data("popid")).html();
                var audio = $(this).data("audio");
                course360.audioController.stopAllSoundsAndPlay(audio);
                Swal.fire({
                    html: html,
                    showCloseButton: true,
                    showCancelButton: false,
                    showConfirmButton: false,
                    allowOutsideClick: false,
                    allowEscapeKey: false,
                    allowEnterKey: false,
                    confirmButtonText: 'Cerrar',
                    target: "body",
                    width: "100%",
                    customClass: 'pop_style',
                    willOpen: function () {
                        //course360.audioController.stopAudio();
                    },
                    didOpen: function () { tbx(); },
                    didRender: function () { },
                    didClose: function () {
                        //course360.audioController.stopAudio();
                    },
                    didDestroy: function () { },
                    willClose: function () {
                        course360.audioController.stopAudio();
                        course360.soundClick();
                        if ($(".btn_pop").length == $(".btn_pop.completed").length) {
                            course360.setSlideVisited();
                            $('.page-sco [class*="ins"]').hide();
                        }
                    }
                });
            }
        });

        function tbx() {
            const ctx = Swal.getHtmlContainer().querySelector('#myChart').getContext('2d');

            const emissionsChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['BEV', 'HEV', 'KEV'],
                    datasets: [{
                        label: 'Emisiones Totales (tCO₂e)',
                        data: [39, 47, 55],
                        backgroundColor: [
                            // Gradientes para cada barra
                            getGradient(ctx, '#32CD32', '#006400'),  // BEV
                            getGradient(ctx, '#ccffcc', '#e6ffe6'),  // HEV
                            getGradient(ctx, '#90ee90', '#b3ffb3')   // KEV
                        ]
                    }]
                },
                options: {
                    plugins: {
                        tooltip: {
                            enabled: true
                        },
                        legend: {
                            display: false
                        },
                        datalabels: {
                            display: true,
                            color: '#000',
                            anchor: 'end',
                            align: 'start',
                            formatter: (value) => `${value} tCO₂e`
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Emisiones Totales (tCO₂e)',
                                color: 'red'
                            }
                        }
                    }
                },
                plugins: [ChartDataLabels]
            });

            // Función para crear gradientes
            function getGradient(ctx, colorStart, colorEnd) {
                const gradient = ctx.createLinearGradient(0, 0, 0, 300);
                gradient.addColorStop(0, colorStart);
                gradient.addColorStop(1, colorEnd);
                return gradient;
            }
        }


    });
</script>