<style>
    .fake {
        background-image: url("img/bg05.webp");
        background-position: center bottom;
        background-repeat: no-repeat;
        background-size: cover;
    }

    .wrap-sw {
        background: rgb(233, 70, 70);
        background: linear-gradient(90deg, rgb(9 11 9) 10%, rgb(0 195 29) 39%, rgb(224 225 228) 100%);
        display: none;
    }

    .swiper-button-disabled {
        opacity: 0.8;
        filter: grayscale(1);
    }

    .card.flat {
        padding: 0;
        background-color: transparent;
        border: none;
        box-shadow: none;
    }

    .card.flat .card-body {
        padding: 0;
        background-color: transparent;
        border: none;
        box-shadow: none;
    }

    .mySwiper {
        width: 100%;
        height: 100px !important;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    .mySwiper .swiper-slide {
        text-align: center;
        font-size: 16px;
        color: #fff;
        display: -webkit-flex;
        display: -ms-flexbox;
        display: flex;
        -webkit-justify-content: center;
        -ms-flex-pack: center;
        justify-content: center;
        -webkit-align-items: center;
        -ms-flex-align: center;
        align-items: center;
        -webkit-flex-direction: column;
        -ms-flex-direction: column;
        flex-direction: column;
    }

    .mySwiper .swiper-slide .img-icon {
        max-width: 100px;
        max-height: 100px;
    }

    .mySwiper .swiper-slide img {
        max-width: 100%;
        height: auto;
        opacity: 0.5;
        -webkit-transform: scale(0.6);
        transform: scale(0.6);
        transition: all 0.5s ease;
    }

    .mySwiper .swiper-slide-active img {
        opacity: 1;
        -webkit-transform: scale(1);
        transform: scale(1);
    }

    .swiper-nav {
        display: -webkit-flex;
        display: -ms-flexbox;
        display: flex;
        -webkit-flex-direction: row;
        -ms-flex-direction: row;
        flex-direction: row;
        width: 100%;
        max-width: 300px;
        height: 100%;
        left: 0;
        right: 0;
        z-index: 55;
        top: 0;
        -webkit-justify-content: space-between;
        -ms-flex-pack: justify;
        justify-content: space-between;
        -webkit-align-items: center;
        -ms-flex-align: center;
        align-items: center;
    }

    .swiper-custom-button-next img,
    .swiper-custom-button-prev img {
        height: 85px;
        width: auto;
    }

    .custom-card {
        border-radius: 15px;
        background-color: #fff;
        border: solid 2px var(--bs-mango);
        box-shadow: rgba(0, 0, 0, 0.15) 0px 15px 25px, rgba(0, 0, 0, 0.05) 0px 5px 10px;
    }

    .custom-card .swiper-slide {
        overflow: hidden;
    }

    .btn-open-info {
        cursor: pointer;
        width: 100%;
        max-width: 70px;
        border-radius: 50%;
        margin-left: 1em;
    }

    @media (min-width: 768px) {

        .swiper-custom-button-next img,
        .swiper-custom-button-prev img {
            height: 150px;
            width: auto;
        }

        .mySwiper {
            height: 200px !important;
        }
    }

    b,
    strong {
        font-weight: bold;
        color: var(--bs-primary);
    }

    #sco15 ul {
        list-style-image: url("img/12.7.png");
    }

    /* .swal2-container.swal2-center.swal2-backdrop-show {
        background: rgba(2, 175, 159, 0.8);
        background: linear-gradient(90deg, rgba(2, 175, 159, 0.8) 0%, rgba(6, 106, 145, 0.8) 100%);
    } */

    .swal2-popup.swal-fullscreen {
        align-items: center;
        height: auto !important;
        min-height: 100vh;
        align-content: center;
    }

    .swal2-popup.swal-fullscreen .swal2-html-container {
        overflow: hidden;
    }

    .custom-card-swal {
        background-color: transparent;
        border: none;
    }

    .custom-card-swal.flip {
        background-image: url("img/cardflip.webp");
        background-size: 100% 100%;
        border-radius: 20px;
        overflow: hidden;
    }

    .custom-card-swal.flip .card-body {
        border-radius: 20px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    b,
    strong {
        font-weight: bold;
        color: var(--bs-primary);
    }
</style>
<div class="w-100 page-sco h-100 pt-4 pt-md-0" id="sco15">
    <div class="container-fluid g-0">
        <div class="row justify-content-center align-items-center h-100">
            <div class="col-12">
                <div class="row">
                    <div class="col-12 text-center px-4 animate__animated animate__backInLeft">
                        <h4 class="text-primary fw-bold">Beneficios ambientales</h4>
                        <p class="" id="lap">
                            Imagina una ciudad con el aire más limpio, el cielo más azul y la vida más sana. Al reducir
                            emisiones contaminantes, también reducimos enfermedades respiratorias.
                        </p>
                    </div>
                    <div class="text-center w-100 my-md-2 my-2 animate__animated animate__slideInLeft ins0" style="display: none;">
                        <div class="border-dark text-rojo-1 px-4 py-2 border border-2 d-inline-block"
                            style="border-radius: 0.5em;">
                            <i class="fa-light fa-arrow-pointer text-rojo-1"></i> Da clic en las flechas
                        </div>
                    </div>
                </div>
                <div class="text-center wrap-sw text-white">
                    <div class="container-fluid">
                        <div class="row justify-content-center align-items-center">
                            <div class="col-10 col-md-12">
                                <div class="card custom-card flat">
                                    <div class="card-body">
                                        <!-- Swiper -->
                                        <div class="swiper mySwiper">
                                            <div class="swiper-wrapper">
                                                <div class="swiper-slide">
                                                    <div class="img-icon">
                                                        <img src="img/icon_01.png" />
                                                    </div>
                                                </div>
                                                <div class="swiper-slide">
                                                    <div class="img-icon">
                                                        <img src="img/icon_02.png" />
                                                    </div>
                                                </div>
                                                <div class="swiper-slide">
                                                    <div class="img-icon">
                                                        <img src="img/icon_03.png" />
                                                    </div>
                                                </div>
                                                <div class="swiper-slide">
                                                    <div class="img-icon">
                                                        <img src="img/icon_04.png" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- navegacion -->
                                        <div class="position-absolute mx-auto swiper-nav">
                                            <div class="swiper-custom-button-prev">
                                                <img src="img/prev.webp" alt="" />
                                            </div>
                                            <div class="swiper-custom-button-next">
                                                <img src="img/next.webp" alt="" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="wrap-cards mt-md-4 mt-2" style="display: none">
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-12 col-md-8">
                                <div class="card custom-card">
                                    <div class="card-body">
                                        <!-- Swiper con validación de slides visitados -->
                                        <div class="swiper customSwiper">
                                            <div class="swiper-wrapper">
                                                <div class="swiper-slide">
                                                    <div class="swiper-content text-center">
                                                        <h4 class="fw-bold text-verde text-start">Reducción de emisiones
                                                            de gases de efecto invernadero (GEI)</h4>
                                                        Disminuye significativamente las emisiones de CO₂ y otros gases
                                                        contaminantes, ayudando a combatir el cambio climático.
                                                    </div>
                                                </div>
                                                <div class="swiper-slide py-3 pe-3 ps-2 text-center">
                                                    <h4 class="fw-bold text-verde text-start">Mejora en la calidad del
                                                        aire</h4>
                                                    Menos vehículos contaminantes significan menos partículas tóxicas en
                                                    el ambiente, lo que se traduce en aire más limpio y saludable para
                                                    todos.
                                                </div>
                                                <div class="swiper-slide text-center">
                                                    <h4 class="fw-bold text-verde text-start">Conservación de recursos
                                                        naturales
                                                    </h4>
                                                    Al reducir el uso de combustibles fósiles, se protege el medio
                                                    ambiente y se disminuye la dependencia de recursos no renovables.
                                                </div>
                                                <div class="swiper-slide text-center">
                                                    <h4 class="fw-bold text-verde text-start">Reducción comprobada de
                                                        emisiones</h4>
                                                    En <b class="text-primary">México</b>, los datos son contundentes:
                                                    <b class="text-primary">un vehículo eléctrico genera
                                                        solo 6.61 kg de CO₂ equivalente por cada 100 km</b> recorridos,
                                                    <b class="text-primary">frente a
                                                        los 21.24 kg de CO₂/100 km que emite un vehículo a combustión
                                                        interna</b>. Esto significa una reducción de aproximadamente <b
                                                        class="text-primary">69%</b> en
                                                    emisiones de CO₂ al elegir un auto eléctrico, considerando
                                                    únicamente la etapa de uso.
                                                    <div class="w-100 text-md-end text-center">
                                                        <img src="img/i.webp"
                                                            class="img-fluid btn-open-info animate__animated animate__pulse animate__infinite"
                                                            data-popid="#pop-vales" data-sound="audio_m18" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="d-none">
        <div id="pop-vales">
            <div class="container py-3">
                <div class="row justify-content-center align-items-center">
                    <div class="col-7 col-md-4">
                        <img src="img/05.1.webp" class="img-fluid" loading="lazy" alt="" />
                    </div>
                    <div class="col-12 col-md-8">
                        <p class="text-center fw-bold text-primary">Análisis respaldado por datos técnicos​</p>
                        <p>Este análisis fue realizado con base en datos del modelo <b class="text-primary">HBEFA,</b>
                            considerando un vehículo de
                            gasolina Euro 5 con motor <1.4L operando en condiciones urbanas reales.</p>
                                <p>Es importante señalar que estos cálculos no incluyen las emisiones asociadas a la
                                    fabricación
                                    del vehículo.</p>
                                <p>Sin embargo, en autos eléctricos de alta utilización (como los de plataformas de
                                    transporte
                                    por aplicación), esas emisiones iniciales se compensan desde el tercer mes de uso,
                                    gracias a
                                    <b class="text-primary">su operación más limpia y eficiente.</b>
                                </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    $(function () {
        "use strict";
        $('#template-instruction').removeClass('show');
        $("body").addClass("fake");
        const audio_m13 = course360.createSound("audio/audio_m13.mp3");
        const audio_m18 = course360.createSound("audio/audio_m18.mp3");

        let swiperIcons;
        let swiperCards;


        audio_m13.on("end", function () {
            $('.ins0').show();
            $("#lp").addClass("d-md-inline-block d-none");
            $(".wrap-sw").show();
            $(".wrap-cards").show();
            swiperCards = initializeSwiper(".customSwiper", onAllSlidesVisited, {
                autoHeight: true, // Ajusta la altura del contenedor al slide activo
                grabCursor: false, // Oculta el cursor de "mano" al pasar sobre el Swiper
                allowTouchMove: false, // Deshabilita el arrastre (drag)
            });
            swiperIcons = initializeSwiper(
                ".mySwiper",
                onAllSlidesVisited,
                {
                    slidesPerView: 5,
                    centeredSlides: true,
                    spaceBetween: 30,
                    grabCursor: false,
                    allowTouchMove: false, // Deshabilita el arrastre (drag)
                    navigation: {
                        nextEl: ".swiper-custom-button-next",
                        prevEl: ".swiper-custom-button-prev",
                    },
                    breakpoints: {
                        0: {
                            slidesPerView: 2,
                            spaceBetween: 20,
                        },
                        768: {
                            slidesPerView: 5,
                            spaceBetween: 30,
                        },
                    },
                },
                audioFiles,
            );
            // Sincronizar los Swipers
            swiperIcons.on("slideChange", function () {
                const currentIndex = swiperIcons.activeIndex;
                swiperCards.slideTo(currentIndex);
            });
        });
        course360.audioController.stopAllSoundsAndPlay(audio_m13);
        const audioFiles = [
            course360.createSound("audio/audio_m14.mp3"),
            course360.createSound("audio/audio_m15.mp3"),
            course360.createSound("audio/audio_m16.mp3"),
            course360.createSound("audio/audio_m17.mp3"),
            course360.createSound("audio/audio_m19.mp3"),
        ];


        function onAllSlidesVisited() {
            console.log("completado");
            course360.setSlideVisited();
        }

        $(".btn-open-info").click(function () {
            const $element = $(this);
            $(this).removeClass("animate__animated animate__pulse animate__infinite").addClass("visited");
            const html = $($(this).data("popid")).html();
            // Validación del audio
            let audio = null;
            const audioData = $element.data("sound");
            console.log(audioData);
            if (audioData) {
                try {
                    audio = eval(audioData);
                    if (audio) {
                        course360.audioController.stopAllSoundsAndPlay(audio);
                    }
                } catch (error) {
                    console.error(`Error al evaluar el audio: ${audioData}`, error);
                }
            }

            Swal.fire({
                html: html,
                target: "body",
                customClass: "poup_class",
                confirmButtonText: "Cerrar",
                showConfirmButton: false,
                showCloseButton: true,
                closeButtonHtml: '<span class="swal2-close-x">×</span>',
                showDenyButton: false,
                showCancelButton: false,
                allowOutsideClick: false,
                allowEscapeKey: false,
                focusConfirm: false,
                willOpen: () => {
                    // $(".swal2-popup").css("padding", "0");
                    // $(".swal2-popup").css("box-shadow", "none");
                    // $(".swal2-container").css("padding", "0");
                    // if (audio) {
                    //     course360.audioController.stopAllSoundsAndPlay(audio);
                    // }
                },
                didOpen: null,
                didRender: null,
                willClose: () => {
                    course360.audioController.stopAudio();
                },
                didClose: null,
                didDestroy: null,
            });
        });

        function initializeSwiper(swiperContainer, callback, options = {}, audios = [], autoPlaySound = true) {
            const visitedSlides = new Set();
            const container = typeof swiperContainer === "string" ? document.querySelector(swiperContainer) : swiperContainer;
            const parent = container.parentElement;
            if (options.navigation && options.navigation.nextEl && options.navigation.prevEl) {
                options.navigation.nextEl = container.querySelector(options.navigation.nextEl)
                    ? container.querySelector(options.navigation.nextEl)
                    : parent.querySelector(options.navigation.nextEl);
                options.navigation.prevEl = container.querySelector(options.navigation.prevEl)
                    ? container.querySelector(options.navigation.prevEl)
                    : parent.querySelector(options.navigation.prevEl);
            }
            const defaultParams = {
                effect: "slide",
                loop: false,
                autoHeight: true,
            };

            // Combina opciones personalizadas con las por defecto
            const params = {
                ...defaultParams,
                ...options,
                on: {
                    init: function () {
                        visitedSlides.add(this.activeIndex);
                        if (audios.length > 0 && audios[this.activeIndex] && autoPlaySound) {
                            course360.audioController.stopAllSoundsAndPlay(audios[this.activeIndex]);
                        }
                    },
                    slideChange: function () {
                        const index = this.activeIndex;
                        visitedSlides.add(index);
                        if (audios.length > 0) {
                            course360.audioController.stopAudio();
                        }
                        if (audios.length > 0 && audios[index]) {
                            course360.audioController.stopAllSoundsAndPlay(audios[index]);
                        }
                        if (visitedSlides.size === this.slides.length && typeof callback === "function") {
                            callback();
                        }
                    },
                },
            };
            return new Swiper(container, params);
        }

    });
</script>